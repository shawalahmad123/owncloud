<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>ownCloud SSO Launcher</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body style="font-family: system-ui; padding: 20px; max-width: 760px">
  <h2>ownCloud Single Sign-On</h2>
  <p>
    This page starts the ownCloud OpenID Connect (SSO) login flow.
    If you already have an active session at the IdP (Keycloak), the redirect back to ownCloud will be seamless.
  </p>

  <div style="display:flex; gap: 10px; flex-wrap: wrap; margin: 16px 0">
    <button onclick="login()" style="padding:10px 14px">Login to ownCloud (SSO)</button>
    <button onclick="openOwnCloud()" style="padding:10px 14px">Open ownCloud</button>
    <button onclick="logout()" style="padding:10px 14px">Logout (ownCloud + IdP)</button>
  </div>

  <pre id="output" style="background:#f6f6f6; padding: 12px; border-radius: 8px; overflow:auto"></pre>

  <script>
    const OWNCLOUD_BASE_URL = "http://localhost:8959";
    const OWNCLOUD_OIDC_LOGIN_URL = `${OWNCLOUD_BASE_URL}/apps/openidconnect/redirect`;
    const OWNCLOUD_OIDC_LOGOUT_URL = `${OWNCLOUD_BASE_URL}/apps/openidconnect/logout`;
    const KEYCLOAK_BASE_URL = "http://localhost:8960";

    function openOwnCloud() {
      window.location.href = OWNCLOUD_BASE_URL;
    }

    function login() {
      window.location.href = OWNCLOUD_OIDC_LOGIN_URL;
    }

    function logout() {
      window.location.href = OWNCLOUD_OIDC_LOGOUT_URL;
    }

    document.getElementById("output").textContent =
      `ownCloud:  ${OWNCLOUD_BASE_URL}\n` +
      `SSO URL:   ${OWNCLOUD_OIDC_LOGIN_URL}\n` +
      `Logout:    ${OWNCLOUD_OIDC_LOGOUT_URL}\n` +
      `Keycloak:  ${KEYCLOAK_BASE_URL}\n`;
  </script>
</body>
</html>
